<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>â—† Diamond League</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=IBM+Plex+Sans:wght@300;400;500;600&family=Oswald:wght@400;500;600;700&family=Bebas+Neue&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- SIDEBAR -->
<nav class="sidebar">
  <div class="sidebar-logo">
    <h1>â—† Diamond</h1>
    <span>League Manager</span>
  </div>
  <div class="nav-section">League</div>
  <div class="nav-item active" onclick="nav('home')" id="nav-home"><span class="nav-icon">ğŸ†</span> League Home</div>
  <div class="nav-item" onclick="nav('players')" id="nav-players"><span class="nav-icon">ğŸ‘¤</span> Players</div>
  <div class="nav-item" onclick="nav('schedule')" id="nav-schedule"><span class="nav-icon">ğŸ“…</span> Schedule</div>
  <div class="nav-item" onclick="nav('playoffs')" id="nav-playoffs"><span class="nav-icon">ğŸ†</span> Playoffs</div>
  <div class="nav-section">Game</div>
  <div class="nav-item" onclick="nav('simulate')" id="nav-simulate"><span class="nav-icon">â–¶</span> Simulate Game</div>
  <div class="league-picker">
    <div class="league-label">Season</div>
    <div class="league-name" id="season-display">2025</div>
    <div class="save-indicator" id="save-ind">â— Auto-saved to browser</div>
  </div>
</nav>

<!-- MAIN -->
<div class="main">

  <!-- LEAGUE HOME PAGE -->
  <div class="page active" id="page-home">
    <div class="topbar">
      <div>
        <div class="topbar-title" id="league-title">Diamond League</div>
        <div class="topbar-sub" id="league-sub">2025 Season Â· 30 Teams</div>
      </div>
      <div class="topbar-actions">
        <button class="btn sm" onclick="editLeagueName()">Edit Name</button>
        <details class="dropdown">
          <summary class="btn sm">League Settings â–¾</summary>
          <div class="dropdown-menu">
            <button class="dropdown-item" onclick="exportLeague()">Export League</button>
            <label class="dropdown-item">Import Roster
              <input type="file" accept=".txt,.csv,.tsv,.json" onchange="importRosters(this)" style="display:none">
            </label>
            <button class="dropdown-item danger" onclick="clearSeason()">Clear Season</button>
          </div>
        </details>
      </div>
    </div>
    <div class="page" style="display:block;padding:24px 28px 60px">
      <div class="league-grid" id="league-stat-cards"></div>
      <div class="section-title">Standings</div>
      <div id="standings-container"></div>
    </div>
  </div>

  <!-- PLAYERS PAGE -->
  <div class="page" id="page-players">
    <div class="topbar">
      <div><div class="topbar-title">Players</div><div class="topbar-sub">League-wide stats & cards</div></div>
    </div>
    <div class="page" style="display:block;padding:24px 28px 60px">
      <div class="search-bar">
        <input class="search-input" id="player-search" placeholder="Search player name..." oninput="renderPlayersTable()">
        <div class="filter-tabs">
          <button class="filter-tab active" onclick="setFilter('ALL',this)">All</button>
          <button class="filter-tab" onclick="setFilter('BAT',this)">Batters</button>
          <button class="filter-tab" onclick="setFilter('PIT',this)">Pitchers</button>
        </div>
      </div>
      <div id="team-filter-bar" style="margin-bottom:14px"></div>
      <table class="players-table" id="players-table">
        <thead><tr id="players-thead"></tr></thead>
        <tbody id="players-tbody"></tbody>
      </table>
    </div>
  </div>

  <!-- SCHEDULE PAGE -->
  <div class="page" id="page-schedule">
    <div class="topbar">
      <div><div class="topbar-title">Schedule</div><div class="topbar-sub" id="schedule-sub">Season games</div></div>
      <div class="topbar-actions">
        <button class="btn sm" onclick="clearSeason()">Clear Season</button>
        <button class="btn sm primary" onclick="advanceSeason()">Advance Season â†’</button>
      </div>
    </div>
    <div class="page" style="display:block;padding:24px 28px 60px">
      <div id="schedule-container"></div>
    </div>
  </div>

  <!-- PLAYOFFS PAGE -->
  <div class="page" id="page-playoffs">
    <div class="topbar">
      <div><div class="topbar-title">Playoffs</div><div class="topbar-sub">MLB Postseason</div></div>
      <div class="topbar-actions" id="playoffs-topbar-actions"></div>
    </div>
    <div class="page" style="display:block;padding:24px 28px 60px">
      <div id="playoffs-container"></div>
    </div>
  </div>

  <!-- SIMULATE PAGE -->
  <div class="page" id="page-simulate">
    <div class="topbar">
      <div><div class="topbar-title">Simulate Game</div><div class="topbar-sub">Stats update after each game</div></div>
    </div>
    <div class="page" style="display:block;padding:24px 28px 60px">
      <div id="sim-container"></div>
    </div>
  </div>

</div><!-- /main -->

<!-- BASEBALL CARD OVERLAY -->
<div class="card-overlay" id="card-overlay" onclick="closeCard(event)">
  <div class="card-wrap">
    <div class="card-close" onclick="closeCardDirect()">âœ•</div>
    <div class="baseball-card" id="baseball-card"></div>
  </div>
</div>

<!-- ROSTER TABLE OVERLAY -->
<div id="roster-table-overlay" onclick="closeRosterTable()" style="position:fixed;inset:0;background:rgba(0,0,0,0.65);z-index:200;display:none;align-items:center;justify-content:center;padding:20px">
  <div onclick="event.stopPropagation()" style="background:var(--panel);border-radius:6px;box-shadow:0 20px 60px rgba(0,0,0,0.4);width:100%;max-width:1200px;max-height:85vh;display:flex;flex-direction:column;overflow:hidden">
    <div style="padding:16px 24px;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center;flex-shrink:0">
      <div>
        <div id="roster-table-title" style="font-family:'Oswald',sans-serif;font-size:1.2rem;font-weight:600;letter-spacing:1px"></div>
        <div id="roster-header-meta" style="margin-top:4px"></div>
      </div>
      <div style="display:flex;gap:0;border:1px solid var(--line);border-radius:3px;overflow:hidden">
        <button id="roster-tab-bat" onclick="rosterSetTab('bat')" style="padding:5px 14px;font-family:'IBM Plex Mono',monospace;font-size:0.65rem;border:none;cursor:pointer">Batters</button>
        <button id="roster-tab-pit" onclick="rosterSetTab('pit')" style="padding:5px 14px;font-family:'IBM Plex Mono',monospace;font-size:0.65rem;border:none;cursor:pointer">Pitchers</button>
      </div>
      <button onclick="closeRosterTable()" style="background:var(--panel);border:2px solid var(--ink);border-radius:50%;width:32px;height:32px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center">âœ•</button>
    </div>
    <div id="roster-table-body" style="overflow:auto;padding:16px 24px 24px"></div>
  </div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>
